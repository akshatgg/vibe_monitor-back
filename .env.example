# General Environment
# Options: local (local development) | dev (ECS dev) | staging | prod (ECS production)
ENVIRONMENT=local
API_BASE_URL=http://localhost:8000
WEB_APP_URL=https://vibemonitor.ai/

# Database URL (PostgreSQL)
# For LOCAL: Use localhost:54322 (maps to postgres:15-alpine container)
# For DEPLOYED: Loaded from AWS SSM Parameter Store (points to RDS)
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:54322/postgres

# CORS
ALLOWED_ORIGINS='["http://localhost:3000", "https://vibemonitor.ai"]'

# JWT Settings
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production
CRYPTOGRAPHY_SECRET=your-super-secret-cryptography-key-for-token-encryption-32bytes

# Onboarding (Google OAuth)
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# GitHub OAuth (for user authentication)
GITHUB_OAUTH_CLIENT_ID=your_github_oauth_client_id
GITHUB_OAUTH_CLIENT_SECRET=your_github_oauth_client_secret


# =======================
# Postmark Email Configuration
# =======================
POSTMARK_SERVER_TOKEN=your_postmark_server_token
# Postmark message stream ID for marketing/broadcast emails
# Use the stream ID from your Postmark dashboard (e.g., "broadcast")
POSTMARK_BROADCAST_STREAM=broadcast
# EMAIL_FROM_ADDRESS=support@vibemonitor.ai  # Optional: Override default from address
# EMAIL_FROM_NAME=VibeMonitor.ai  # Optional: Override default from name
# CONTACT_FORM_RECIPIENT_EMAIL=support@vibemonitor.ai  # Optional: Override default recipient email
# =======================
# Scheduler Authentication
# =======================
# Secret token for scheduler endpoints (GitHub Actions, cron jobs, etc.)
SCHEDULER_SECRET_TOKEN=your-super-secret-scheduler-token-change-this

# Log Level
LOG_LEVEL=INFO

# Slack Integration
SLACK_SIGNING_SECRET=YOUR_SLACK_SIGNING_SECRET
SLACK_WEBHOOK_URL=YOUR_SLACK_WEBHOOK_URL
SLACK_CLIENT_ID=YOUR_SLACK_CLIENT_ID
SLACK_CLIENT_SECRET=YOUR_SLACK_CLIENT_SECRET
ENGAGEMENT_SLACK_WEBHOOK_URL=YOUR_ENGAGEMENT_SLACK_WEBHOOK_URL
# Groq (for text-only RCA)
GROQ_API_KEY=your_groq_api_key_here
GROQ_LLM_MODEL=openai/gpt-oss-120b

# Gemini (for image-based RCA with vision)
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_LLM_MODEL=gemini-2.5-flash

# AWS SQS (LocalStack for development, real AWS for production)
AWS_REGION=us-east-1
SQS_QUEUE_URL=http://localhost:4566/000000000000/vm-api-queue
HEALTH_REVIEW_QUEUE_URL=http://localhost:4566/000000000000/health-review-queue

# AWS Credentials - ONLY for local development (local environment)
# Used for LocalStack AND for two-stage role assumption when testing real AWS integrations
# In dev/prod: ECS Task Role provides automatic credentials (no keys needed)
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test

# Only required for local development with LocalStack
AWS_ENDPOINT_URL=http://localhost:4566

# =======================
# Redis (for SSE pub/sub streaming)
# =======================
# LOCAL: Use localhost Redis container
REDIS_URL=redis://localhost:6379
# PRODUCTION: Uses AWS ElastiCache cache.t4g.micro with TLS (loaded from SSM)
# REDIS_URL=rediss://master.your-cluster.cache.amazonaws.com:6379

# =======================
# AWS Owner Role (Two-Stage STS AssumeRole)
# =======================
# ONLY REQUIRED FOR LOCAL ENVIRONMENT
# Owner role ARN for two-stage authentication when testing AWS integrations locally
# In dev/prod environments: ECS Task Role is used directly (no owner role needed)
OWNER_ROLE_ARN=arn:aws:iam::YOUR_ACCOUNT_ID:role/VibemonitorOwnerRole
# External ID for owner role security (recommended)
OWNER_ROLE_EXTERNAL_ID=vibemonitor-owner

CHAT_UPLOADS_BUCKET=vibe-monitor-chat-files-local

# Github app
GITHUB_APP_NAME=your_github_app_name
GITHUB_APP_ID=your_github_app_id
GITHUB_PRIVATE_KEY_PEM=your_base64_encoded_private_key
GITHUB_CLIENT_ID=your_github_app_client_id
GITHUB_WEBHOOK_SECRET=your_webhook_secret

# ==================== OPENTELEMETRY CONFIGURATION ====================
# OpenTelemetry sends metrics and logs via OTLP protocol to New Relic
# Data flows: VM-API → OTEL Collector → New Relic (configured in otel-collector-config.yaml)

# Enable/disable OpenTelemetry (set to false to disable)
OTEL_ENABLED=true

# === FOR LOCAL DEVELOPMENT ===
# Point to OTEL Collector (docker-compose service name)
OTEL_OTLP_ENDPOINT=http://otel-collector:4317
HOSTNAME=my-local-dev

# === FOR EC2 DEPLOYMENT ===
# Point to OTEL Collector (running on same or different EC2)
# The collector is configured to export to New Relic (see otel-collector-config.yaml)
OTEL_OTLP_ENDPOINT=http://localhost:4317
HOSTNAME=ec2-vm-api-prod-1

# === DISABLE TELEMETRY ===
# To disable OpenTelemetry completely
# OTEL_ENABLED=false

# Database Instrumentation (tracks transaction metrics and connection pool usage)
DB_INSTRUMENTATION_ENABLED=true

# Sentry Configuration (for error tracking)
SENTRY_DSN=your_sentry_dsn_here

# =======================
# Langfuse Configuration (Agent Observability)
# =======================

# === FOR LOCAL DEVELOPMENT ===
# dev_start.sh automatically starts a local Langfuse container on port 3703
# First time setup:
#   1. Visit http://localhost:3703 and create an account
#   2. Create a project and go to Settings → API Keys
#   3. Copy the keys below
LANGFUSE_ENABLED=true
LANGFUSE_HOST=http://localhost:3703
LANGFUSE_PUBLIC_KEY=pk-lf-your-local-key
LANGFUSE_SECRET_KEY=sk-lf-your-local-key

# === FOR PRODUCTION ===
# Use Langfuse Cloud (https://cloud.langfuse.com)
# LANGFUSE_HOST=https://us.cloud.langfuse.com
# LANGFUSE_PUBLIC_KEY=pk-lf-your-cloud-key
# LANGFUSE_SECRET_KEY=sk-lf-your-cloud-key

# =======================
# Stripe Configuration
# =======================
# Get test keys from https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
# Webhook secret for verifying Stripe webhook signatures
# For local testing, use: stripe listen --forward-to localhost:8000/api/v1/billing/webhooks/stripe
STRIPE_WEBHOOK_SECRET=whsec_...
# Price IDs from Stripe Dashboard (Products > Prices)
STRIPE_PRO_PLAN_PRICE_ID=price_...
STRIPE_ADDITIONAL_SERVICE_PRICE_ID=price_...

# === NEWRELIC LICENSE KEY ===
# Required for OpenTelemetry Collector to forward data to NewRelic
# (Account Settings -> API Keys -> License Key)
NEW_RELIC_LICENSE_KEY=your_newrelic_license_key_here

# =======================
# Testing Configuration

WORKSPACE_ID=add_your_workspace_id_here_for_testing_purposes
